<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Blockchain.Fae.Internal.Storage</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Blockchain.Fae.Internal.Storage.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">fae-2.0.0.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Ryan Reich 2017-2018</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>ryan.reich@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Blockchain.Fae.Internal.Storage</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Types</a></li><li><a href="#g:2">Template Haskell</a></li><li><a href="#g:3">Functions</a><ul><li><a href="#g:4"><code>Storage</code>-specific lenses</a></li><li><a href="#g:5">General lens combinators</a></li><li><a href="#g:6">Manipulating stored values</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides types and associated functions for accessing the storage of transactions and the contracts they create.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Storage">Storage</a> = <a href="#v:Storage">Storage</a> {<ul class="subs"><li><a href="#v:getStorage">getStorage</a> :: <a href="../containers-0.5.10.2/Data-Map-Internal.html#t:Map">Map</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a></li><li><a href="#v:importedValues">importedValues</a> :: <a href="../containers-0.5.10.2/Data-Map-Internal.html#t:Map">Map</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:FaeStorageT">FaeStorageT</a> = <a href="../mtl-2.2.2/Control-Monad-State-Lazy.html#t:StateT">StateT</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:FaeStorage">FaeStorage</a> a = <a href="#v:FaeStorage">FaeStorage</a> {<ul class="subs"><li><a href="#v:getFaeStorage">getFaeStorage</a> :: <a href="../mtl-2.2.2/Control-Monad-State-Lazy.html#t:State">State</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> a</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:TransactionEntry">TransactionEntry</a> = <a href="#v:TransactionEntry">TransactionEntry</a> {<ul class="subs"><li><a href="#v:inputResults">inputResults</a> :: <a href="../vector-0.12.0.1/Data-Vector.html#t:Vector">Vector</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></li><li><a href="#v:outputs">outputs</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a></li><li><a href="#v:txSigners">txSigners</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Signers">Signers</a></li><li><a href="#v:result">result</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Result">Result</a> = <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> a =&gt; <a href="#v:Result">Result</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:InputResults">InputResults</a> = <a href="#v:InputResults">InputResults</a> {<ul class="subs"><li><a href="#v:iRealID">iRealID</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></li><li><a href="#v:iStatus">iStatus</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></li><li><a href="#v:iResult">iResult</a> :: <a href="Blockchain-Fae-Internal-Contract.html#t:WithEscrows">WithEscrows</a> <a href="Blockchain-Fae-Internal-Contract.html#t:ReturnValue">ReturnValue</a></li><li><a href="#v:iOutputsM">iOutputsM</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Status">Status</a><ul class="subs"><li>= <a href="#v:Updated">Updated</a></li><li>| <a href="#v:Deleted">Deleted</a></li><li>| <a href="#v:Failed">Failed</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:Outputs">Outputs</a> = <a href="../vector-0.12.0.1/Data-Vector.html#t:Vector">Vector</a> <a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ExportData">ExportData</a> = <a href="#v:ExportData">ExportData</a> {<ul class="subs"><li><a href="#v:exportedCID">exportedCID</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></li><li><a href="#v:exportStatus">exportStatus</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></li><li><a href="#v:neededModules">neededModules</a> :: [<a href="../base-4.10.1.0/Data-String.html#t:String">String</a>]</li><li><a href="#v:exportNameType">exportNameType</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></li><li><a href="#v:exportedValue">exportedValue</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li></ul>}</li><li class="src short"><a href="#v:_txSigners">_txSigners</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Signers">Signers</a></li><li class="src short"><a href="#v:_result">_result</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a></li><li class="src short"><a href="#v:_outputs">_outputs</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a></li><li class="src short"><a href="#v:_inputResults">_inputResults</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> (<a href="../vector-0.12.0.1/Data-Vector.html#t:Vector">Vector</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>)</li><li class="src short"><a href="#v:_iStatus">_iStatus</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></li><li class="src short"><a href="#v:_iResult">_iResult</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:WithEscrows">WithEscrows</a> <a href="Blockchain-Fae-Internal-Contract.html#t:ReturnValue">ReturnValue</a>)</li><li class="src short"><a href="#v:_iRealID">_iRealID</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></li><li class="src short"><a href="#v:_iOutputsM">_iOutputsM</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a>)</li><li class="src short"><a href="#v:_importedValues">_importedValues</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../containers-0.5.10.2/Data-Map-Internal.html#t:Map">Map</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>)</li><li class="src short"><a href="#v:_getStorage">_getStorage</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../containers-0.5.10.2/Data-Map-Internal.html#t:Map">Map</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a>)</li><li class="src short"><a href="#v:inputResultsAt">inputResultsAt</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>)</li><li class="src short"><a href="#v:contractAtCID">contractAtCID</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:AbstractGlobalContract">AbstractGlobalContract</a>)</li><li class="src short"><a href="#v:outputAtNonce">outputAtNonce</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a>)</li><li class="src short"><a href="#v:outputAt">outputAt</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>)</li><li class="src short"><a href="#v:txPartLens">txPartLens</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionPart">TransactionPart</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a>)</li><li class="src short"><a href="#v:txInputLens">txInputLens</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>)</li><li class="src short"><a href="#v:vectorAt">vectorAt</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="../vector-0.12.0.1/Data-Vector.html#t:Vector">Vector</a> a) (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:outputContractNonce">outputContractNonce</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Nonce">Nonce</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>) (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a>)</li><li class="src short"><a href="#v:guardNonce">guardNonce</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (m <a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a>) (m <a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a>)</li><li class="src short"><a href="#v:joinUncertainty">joinUncertainty</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens">Lens</a> s (m (m t)) (m (m a)) (m b) -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens">Lens</a> s (m t) (m a) (m b)</li><li class="src short"><a href="#v:uncertain">uncertain</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> s (m a) -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (m s) (m a)</li><li class="src short"><a href="#v:onlyJust">onlyJust</a> :: <a href="Blockchain-Fae.html#t:Exception">Exception</a> e =&gt; e -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> a (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:listToOutputs">listToOutputs</a> :: [<a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>] -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a></li><li class="src short"><a href="#v:successful">successful</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:makeInputVersions">makeInputVersions</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> -&gt; <a href="Blockchain-Fae-Internal-Versions.html#t:VersionMap">VersionMap</a></li><li class="src short"><a href="#v:addImportedValue">addImportedValue</a> :: (<a href="Blockchain-Fae-Internal-Versions.html#t:Versionable">Versionable</a> a, <a href="Blockchain-Fae-Internal-IDs.html#t:HasEscrowIDs">HasEscrowIDs</a> a, <a href="Blockchain-Fae-Internal-Contract.html#t:Exportable">Exportable</a> a) =&gt; <a href="../mtl-2.2.2/Control-Monad-State-Lazy.html#t:State">State</a> <a href="Blockchain-Fae-Internal-Contract.html#t:Escrows">Escrows</a> a -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorage">FaeStorage</a> ()</li><li class="src short"><a href="#v:getExportedValue">getExportedValue</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorageT">FaeStorageT</a> m <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a></li><li class="src short"><a href="#v:runStorageT">runStorageT</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorageT">FaeStorageT</a> m a -&gt; m a</li></ul></div><div id="interface"><h1 id="g:1">Types</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Storage" class="def">Storage</a> <a href="src/Blockchain.Fae.Internal.Storage.html#Storage" class="link">Source</a> <a href="#t:Storage" class="selflink">#</a></p><div class="doc"><p><code><a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a></code> records the complete effects of running each transaction.
 It also holds any contract return values that have been imported; no
 attempt is made to validate them against the actual return values, and
 it is expected that users come to some agreement on their correctness
 before sharing them.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Storage" class="def">Storage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getStorage" class="def">getStorage</a> :: <a href="../containers-0.5.10.2/Data-Map-Internal.html#t:Map">Map</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:importedValues" class="def">importedValues</a> :: <a href="../containers-0.5.10.2/Data-Map-Internal.html#t:Map">Map</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:Storage" class="caption collapser" onclick="toggleSection('i:Storage')">Instances</p><div id="section.i:Storage" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Storage:Ixed:1" class="instance expander" onclick="toggleSection('i:id:Storage:Ixed:1')"></span> <a href="../lens-4.16.1/Control-Lens-At.html#t:Ixed">Ixed</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-172" class="link">Source</a> <a href="#t:Storage" class="selflink">#</a></td><td class="doc"><p>For the <code><a href="../lens-4.16.1/Control-Lens-At.html#t:At">At</a></code> instance</p></td></tr><tr><td colspan="2"><div id="section.i:id:Storage:Ixed:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ix">ix</a> :: <a href="../lens-4.16.1/Control-Lens-At.html#t:Index">Index</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Traversal-39-">Traversal'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../lens-4.16.1/Control-Lens-At.html#t:IxValue">IxValue</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a>) <a href="#v:ix" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Storage:At:2" class="instance expander" onclick="toggleSection('i:id:Storage:At:2')"></span> <a href="../lens-4.16.1/Control-Lens-At.html#t:At">At</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-177" class="link">Source</a> <a href="#t:Storage" class="selflink">#</a></td><td class="doc"><p>We define this instance <em>in addition to</em> the natural <code><a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a></code>
 indexing of the <code><a href="Blockchain-Fae-Internal-Storage.html#v:getStorage">getStorage</a></code> field so that we can look up contracts by
 ID, which requires descending through several levels of lookups, any of
 which may fail (in different ways).</p></td></tr><tr><td colspan="2"><div id="section.i:id:Storage:At:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:at">at</a> :: <a href="../lens-4.16.1/Control-Lens-At.html#t:Index">Index</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../lens-4.16.1/Control-Lens-At.html#t:IxValue">IxValue</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a>)) <a href="#v:at" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Storage:Index:3" class="instance expander" onclick="toggleSection('i:id:Storage:Index:3')"></span> <span class="keyword">type</span> <a href="../lens-4.16.1/Control-Lens-At.html#t:Index">Index</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-168" class="link">Source</a> <a href="#t:Storage" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Storage:Index:3" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../lens-4.16.1/Control-Lens-At.html#t:Index">Index</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> = <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Storage:IxValue:4" class="instance expander" onclick="toggleSection('i:id:Storage:IxValue:4')"></span> <span class="keyword">type</span> <a href="../lens-4.16.1/Control-Lens-At.html#t:IxValue">IxValue</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-170" class="link">Source</a> <a href="#t:Storage" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Storage:IxValue:4" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../lens-4.16.1/Control-Lens-At.html#t:IxValue">IxValue</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> = <a href="../base-4.10.1.0/Data-Either.html#t:Either">Either</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> <a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:FaeStorageT" class="def">FaeStorageT</a> = <a href="../mtl-2.2.2/Control-Monad-State-Lazy.html#t:StateT">StateT</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> <a href="src/Blockchain.Fae.Internal.Storage.html#FaeStorageT" class="link">Source</a> <a href="#t:FaeStorageT" class="selflink">#</a></p><div class="doc"><p>A general storage transformer; used for running transactions in IO.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:FaeStorage" class="def">FaeStorage</a> a <a href="src/Blockchain.Fae.Internal.Storage.html#FaeStorage" class="link">Source</a> <a href="#t:FaeStorage" class="selflink">#</a></p><div class="doc"><p>A newtype so that the interpreter doesn't need <code><a href="../mtl-2.2.2/Control-Monad-State-Lazy.html#t:StateT">StateT</a></code> in scope.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FaeStorage" class="def">FaeStorage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getFaeStorage" class="def">getFaeStorage</a> :: <a href="../mtl-2.2.2/Control-Monad-State-Lazy.html#t:State">State</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TransactionEntry" class="def">TransactionEntry</a> <a href="src/Blockchain.Fae.Internal.Storage.html#TransactionEntry" class="link">Source</a> <a href="#t:TransactionEntry" class="selflink">#</a></p><div class="doc"><p>Each transaction can produce outputs in two different ways (cf.
 <code><a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></code>), has an associated &quot;signer&quot; public key, and a result.</p><p>The technical reason for separating <code>inputOutputs</code> from <code><a href="Blockchain-Fae-Internal-Storage.html#v:outputs">outputs</a></code> is
 that it makes it possible for contracts to create new contracts without
 putting a global lock on the storage; thunk execution will go straight
 to the correct contract's outputs and not require evaluation of any
 other contract or transaction.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TransactionEntry" class="def">TransactionEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:inputResults" class="def">inputResults</a> :: <a href="../vector-0.12.0.1/Data-Vector.html#t:Vector">Vector</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:outputs" class="def">outputs</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:txSigners" class="def">txSigners</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Signers">Signers</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:result" class="def">result</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Result" class="def">Result</a> <a href="src/Blockchain.Fae.Internal.Storage.html#Result" class="link">Source</a> <a href="#t:Result" class="selflink">#</a></p><div class="doc"><p>The result can be anything, but should be <code><a href="../base-4.10.1.0/Text-Show.html#v:show">show</a></code>able so that it has
 outside meaning.  This is an existential type, so the record names are
 just there for documentation; values have to be extracted by
 pattern-matching.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> a =&gt; <a id="v:Result" class="def">Result</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Result" class="caption collapser" onclick="toggleSection('i:Result')">Instances</p><div id="section.i:Result" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Result:Show:1" class="instance expander" onclick="toggleSection('i:id:Result:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-138" class="link">Source</a> <a href="#t:Result" class="selflink">#</a></td><td class="doc"><p>For convenience, so we don't have to pattern-match elsewhere.</p></td></tr><tr><td colspan="2"><div id="section.i:id:Result:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:InputResults" class="def">InputResults</a> <a href="src/Blockchain.Fae.Internal.Storage.html#InputResults" class="link">Source</a> <a href="#t:InputResults" class="selflink">#</a></p><div class="doc"><p>A minimal set of descriptors of the results of running a contract.
 This used to contain an <code>iVersions</code>, but that can be derived from
 <code><a href="Blockchain-Fae-Internal-Storage.html#v:iResult">iResult</a></code> now that it is <code><a href="Blockchain-Fae-Internal-Contract.html#t:WithEscrows">WithEscrows</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:InputResults" class="def">InputResults</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:iRealID" class="def">iRealID</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></dfn><div class="doc"><p>This used to be guaranteed to have a specific nonce (rather than
 <code><a href="Blockchain-Fae-Internal-IDs-Types.html#v:Current">Current</a></code>) but this is no longer the case; it is exactly the
 <code><a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></code> with which the call was made.</p></div></li><li><dfn class="src"><a id="v:iStatus" class="def">iStatus</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></dfn><div class="doc"><p>Though <code><a href="Blockchain-Fae-Internal-Storage.html#v:Failed">Failed</a></code> corresponds to an exception being thrown from
 <code><a href="Blockchain-Fae-Internal-Storage.html#v:iResult">iResult</a></code>, it is not possible to detect <code><a href="Blockchain-Fae-Internal-Storage.html#v:Deleted">Deleted</a></code> from the other
 fields here, so this one is necessary.</p></div></li><li><dfn class="src"><a id="v:iResult" class="def">iResult</a> :: <a href="Blockchain-Fae-Internal-Contract.html#t:WithEscrows">WithEscrows</a> <a href="Blockchain-Fae-Internal-Contract.html#t:ReturnValue">ReturnValue</a></dfn><div class="doc"><p>This is <em>very dangerous</em> because these escrows are duplicates.
 This value <em>must not</em> be used inside Fae, but only exposed to
 external applications (such as import/export).</p></div></li><li><dfn class="src"><a id="v:iOutputsM" class="def">iOutputsM</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a></dfn><div class="doc"><p><code><a href="../base-4.10.1.0/Data-Maybe.html#v:Nothing">Nothing</a></code> means that the results were imported and the contract
 wasn't actually run.  Perhaps in the future those can be imported
 too...</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:InputResults" class="caption collapser" onclick="toggleSection('i:InputResults')">Instances</p><div id="section.i:InputResults" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:InputResults:Generic:1" class="instance expander" onclick="toggleSection('i:id:InputResults:Generic:1')"></span> <a href="Blockchain-Fae.html#t:Generic">Generic</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-102" class="link">Source</a> <a href="#t:InputResults" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:InputResults:Generic:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> -&gt; <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> x -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> <a href="#v:to" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:InputResults:Rep:2" class="instance expander" onclick="toggleSection('i:id:InputResults:Rep:2')"></span> <span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-1" class="link">Source</a> <a href="#t:InputResults" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:InputResults:Rep:2" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> = <a href="../base-4.10.1.0/GHC-Generics.html#t:D1">D1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaData">MetaData</a> &quot;InputResults&quot; &quot;Blockchain.Fae.Internal.Storage&quot; &quot;fae-2.0.0.0-L07ThzIQy745sKb2gq45cw&quot; <a href="../base-4.10.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:C1">C1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;InputResults&quot; <a href="../base-4.10.1.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.10.1.0/Data-Bool.html#v:True">True</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;iRealID&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a>)) (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;iStatus&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a>))) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;iResult&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:WithEscrows">WithEscrows</a> <a href="Blockchain-Fae-Internal-Contract.html#t:ReturnValue">ReturnValue</a>))) (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;iOutputsM&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a>))))))</div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Status" class="def">Status</a> <a href="src/Blockchain.Fae.Internal.Storage.html#Status" class="link">Source</a> <a href="#t:Status" class="selflink">#</a></p><div class="doc"><p>Semantic report of what happened in a contract call.  As such,
 creating a <code><a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></code> value requires a policy decision, made in
 <a href="Blockchain-Fae-Internal-Transaction.html">Blockchain.Fae.Internal.Transaction</a>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Updated" class="def">Updated</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Deleted" class="def">Deleted</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Failed" class="def">Failed</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Status" class="caption collapser" onclick="toggleSection('i:Status')">Instances</p><div id="section.i:Status" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Status:Show:1" class="instance expander" onclick="toggleSection('i:id:Status:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-107" class="link">Source</a> <a href="#t:Status" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Status:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Status:Generic:2" class="instance expander" onclick="toggleSection('i:id:Status:Generic:2')"></span> <a href="Blockchain-Fae.html#t:Generic">Generic</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-107" class="link">Source</a> <a href="#t:Status" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Status:Generic:2" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> -&gt; <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> x -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> <a href="#v:to" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Status:Serialize:3" class="instance expander" onclick="toggleSection('i:id:Status:Serialize:3')"></span> <a href="Blockchain-Fae-Internal-Crypto.html#t:Serialize">Serialize</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-142" class="link">Source</a> <a href="#t:Status" class="selflink">#</a></td><td class="doc"><ul><li></li></ul></td></tr><tr><td colspan="2"><div id="section.i:id:Status:Serialize:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put">put</a> :: <a href="../cereal-0.5.5.0/Data-Serialize-Put.html#t:Putter">Putter</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="../cereal-0.5.5.0/Data-Serialize-Get.html#t:Get">Get</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> <a href="#v:get" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Status:Rep:4" class="instance expander" onclick="toggleSection('i:id:Status:Rep:4')"></span> <span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-1" class="link">Source</a> <a href="#t:Status" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Status:Rep:4" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> = <a href="../base-4.10.1.0/GHC-Generics.html#t:D1">D1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaData">MetaData</a> &quot;Status&quot; &quot;Blockchain.Fae.Internal.Storage&quot; &quot;fae-2.0.0.0-L07ThzIQy745sKb2gq45cw&quot; <a href="../base-4.10.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-43-:">(:+:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:C1">C1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;Updated&quot; <a href="../base-4.10.1.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.10.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:U1">U1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a>)) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-43-:">(:+:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:C1">C1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;Deleted&quot; <a href="../base-4.10.1.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.10.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:U1">U1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a>)) (<a href="../base-4.10.1.0/GHC-Generics.html#t:C1">C1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;Failed&quot; <a href="../base-4.10.1.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.10.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:U1">U1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a>))))</div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Outputs" class="def">Outputs</a> = <a href="../vector-0.12.0.1/Data-Vector.html#t:Vector">Vector</a> <a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a> <a href="src/Blockchain.Fae.Internal.Storage.html#Outputs" class="link">Source</a> <a href="#t:Outputs" class="selflink">#</a></p><div class="doc"><p>The elements are <code><a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a></code> because an output contract may be deleted,
 but the indexing of the others should not change, so we have to keep the
 full array.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ExportData" class="def">ExportData</a> <a href="src/Blockchain.Fae.Internal.Storage.html#ExportData" class="link">Source</a> <a href="#t:ExportData" class="selflink">#</a></p><div class="doc"><p>Not only convenient, but also important for ensuring that the three
 different source trees using this type all have the same version of it.
 Since this type is exchanged in serialized form between different
 processes, type checking cannot verify it at compile time.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ExportData" class="def">ExportData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:exportedCID" class="def">exportedCID</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:exportStatus" class="def">exportStatus</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:neededModules" class="def">neededModules</a> :: [<a href="../base-4.10.1.0/Data-String.html#t:String">String</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:exportNameType" class="def">exportNameType</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:exportedValue" class="def">exportedValue</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:ExportData" class="caption collapser" onclick="toggleSection('i:ExportData')">Instances</p><div id="section.i:ExportData" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ExportData:Generic:1" class="instance expander" onclick="toggleSection('i:id:ExportData:Generic:1')"></span> <a href="Blockchain-Fae.html#t:Generic">Generic</a> <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-127" class="link">Source</a> <a href="#t:ExportData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ExportData:Generic:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a> -&gt; <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a> x -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a> <a href="#v:to" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ExportData:Serialize:2" class="instance expander" onclick="toggleSection('i:id:ExportData:Serialize:2')"></span> <a href="Blockchain-Fae-Internal-Crypto.html#t:Serialize">Serialize</a> <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-145" class="link">Source</a> <a href="#t:ExportData" class="selflink">#</a></td><td class="doc"><ul><li></li></ul></td></tr><tr><td colspan="2"><div id="section.i:id:ExportData:Serialize:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put">put</a> :: <a href="../cereal-0.5.5.0/Data-Serialize-Put.html#t:Putter">Putter</a> <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="../cereal-0.5.5.0/Data-Serialize-Get.html#t:Get">Get</a> <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a> <a href="#v:get" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ExportData:Rep:3" class="instance expander" onclick="toggleSection('i:id:ExportData:Rep:3')"></span> <span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a></span> <a href="src/Blockchain.Fae.Internal.Storage.html#line-1" class="link">Source</a> <a href="#t:ExportData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ExportData:Rep:3" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a> = <a href="../base-4.10.1.0/GHC-Generics.html#t:D1">D1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaData">MetaData</a> &quot;ExportData&quot; &quot;Blockchain.Fae.Internal.Storage&quot; &quot;fae-2.0.0.0-L07ThzIQy745sKb2gq45cw&quot; <a href="../base-4.10.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:C1">C1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;ExportData&quot; <a href="../base-4.10.1.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.10.1.0/Data-Bool.html#v:True">True</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;exportedCID&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a>)) (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;exportStatus&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a>))) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;neededModules&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> [<a href="../base-4.10.1.0/Data-String.html#t:String">String</a>])) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;exportNameType&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a>)) (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;exportedValue&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>))))))</div></div></td></tr></table></div></div></div><h1 id="g:2">Template Haskell</h1><div class="top"><p class="src"><a id="v:_txSigners" class="def">_txSigners</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Signers">Signers</a> <a href="src/Blockchain.Fae.Internal.Storage.html#line-131" class="link">Source</a> <a href="#v:_txSigners" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_result" class="def">_result</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a> <a href="src/Blockchain.Fae.Internal.Storage.html#line-131" class="link">Source</a> <a href="#v:_result" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_outputs" class="def">_outputs</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a> <a href="src/Blockchain.Fae.Internal.Storage.html#line-131" class="link">Source</a> <a href="#v:_outputs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_inputResults" class="def">_inputResults</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> (<a href="../vector-0.12.0.1/Data-Vector.html#t:Vector">Vector</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#line-131" class="link">Source</a> <a href="#v:_inputResults" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_iStatus" class="def">_iStatus</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> <a href="src/Blockchain.Fae.Internal.Storage.html#line-132" class="link">Source</a> <a href="#v:_iStatus" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_iResult" class="def">_iResult</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:WithEscrows">WithEscrows</a> <a href="Blockchain-Fae-Internal-Contract.html#t:ReturnValue">ReturnValue</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#line-132" class="link">Source</a> <a href="#v:_iResult" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_iRealID" class="def">_iRealID</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> <a href="src/Blockchain.Fae.Internal.Storage.html#line-132" class="link">Source</a> <a href="#v:_iRealID" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_iOutputsM" class="def">_iOutputsM</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#line-132" class="link">Source</a> <a href="#v:_iOutputsM" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_importedValues" class="def">_importedValues</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../containers-0.5.10.2/Data-Map-Internal.html#t:Map">Map</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#line-133" class="link">Source</a> <a href="#v:_importedValues" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_getStorage" class="def">_getStorage</a> :: <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../containers-0.5.10.2/Data-Map-Internal.html#t:Map">Map</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#line-133" class="link">Source</a> <a href="#v:_getStorage" class="selflink">#</a></p></div><h1 id="g:3">Functions</h1><h2 id="g:4"><code><a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a></code>-specific lenses</h2><div class="top"><p class="src"><a id="v:inputResultsAt" class="def">inputResultsAt</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#inputResultsAt" class="link">Source</a> <a href="#v:inputResultsAt" class="selflink">#</a></p><div class="doc"><p>Accessor partway down the hierarchy, stopping at the full
 <code><a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></code> and not checking the nonce.</p></div></div><div class="top"><p class="src"><a id="v:contractAtCID" class="def">contractAtCID</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:AbstractGlobalContract">AbstractGlobalContract</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#contractAtCID" class="link">Source</a> <a href="#v:contractAtCID" class="selflink">#</a></p><div class="doc"><p>Simplified accessor for just the contract function, since often one
 does not want to bother with the imported values or the nonce.  This
 does check the nonce, however.</p></div></div><div class="top"><p class="src"><a id="v:outputAtNonce" class="def">outputAtNonce</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#outputAtNonce" class="link">Source</a> <a href="#v:outputAtNonce" class="selflink">#</a></p><div class="doc"><p>Accesses down to the output data without bothering with the imported
 results, and checking the nonce.</p></div></div><div class="top"><p class="src"><a id="v:outputAt" class="def">outputAt</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#outputAt" class="link">Source</a> <a href="#v:outputAt" class="selflink">#</a></p><div class="doc"><p>Accesses the full <code><a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a></code> without checking the nonce (as makes
 sense, as that is only available in the <code><a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a></code> below it).</p></div></div><div class="top"><p class="src"><a id="v:txPartLens" class="def">txPartLens</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionPart">TransactionPart</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#txPartLens" class="link">Source</a> <a href="#v:txPartLens" class="selflink">#</a></p><div class="doc"><p>Routes to the correct outputs list depending on where in the
 transaction it happened.</p></div></div><div class="top"><p class="src"><a id="v:txInputLens" class="def">txInputLens</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Blockchain-Fae-Internal-Storage.html#t:TransactionEntry">TransactionEntry</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#txInputLens" class="link">Source</a> <a href="#v:txInputLens" class="selflink">#</a></p><div class="doc"><p>Kind of redundant but used as a piece in several places, so worth
 a named synonym.</p></div></div><div class="top"><p class="src"><a id="v:vectorAt" class="def">vectorAt</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="../vector-0.12.0.1/Data-Vector.html#t:Vector">Vector</a> a) (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) <a href="src/Blockchain.Fae.Internal.Storage.html#vectorAt" class="link">Source</a> <a href="#v:vectorAt" class="selflink">#</a></p><div class="doc"><p>This is a bit of a fake lens, as it slightly fails the law that
 setting following getting is the identity; if you go out-of-bounds, the
 former is an exception and the latter is, of course, a no-op.  Barring
 that, this just marshals <code><a href="../vector-0.12.0.1/Data-Vector.html#v:-33--63-">!?</a></code> and <code><a href="../vector-0.12.0.1/Data-Vector.html#v:modify">modify</a></code> to get and
 set.</p></div></div><div class="top"><p class="src"><a id="v:outputContractNonce" class="def">outputContractNonce</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Nonce">Nonce</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>) (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#outputContractNonce" class="link">Source</a> <a href="#v:outputContractNonce" class="selflink">#</a></p><div class="doc"><p>Descends into the <code><a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a></code> mindfully.  On getting, checks the
 nonce (if one was specified); on setting, increments it (regardless).</p></div></div><div class="top"><p class="src"><a id="v:guardNonce" class="def">guardNonce</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:MonadPlus">MonadPlus</a> m =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (m <a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a>) (m <a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a>) <a href="src/Blockchain.Fae.Internal.Storage.html#guardNonce" class="link">Source</a> <a href="#v:guardNonce" class="selflink">#</a></p><div class="doc"><p>Filters an <code><a href="Blockchain-Fae-Internal-Contract.html#t:OutputData">OutputData</a></code> through a nonce check, but just for getting.</p></div></div><h2 id="g:5">General lens combinators</h2><div class="top"><p class="src"><a id="v:joinUncertainty" class="def">joinUncertainty</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens">Lens</a> s (m (m t)) (m (m a)) (m b) -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens">Lens</a> s (m t) (m a) (m b) <a href="src/Blockchain.Fae.Internal.Storage.html#joinUncertainty" class="link">Source</a> <a href="#v:joinUncertainty" class="selflink">#</a></p><div class="doc"><p>Basically, runs <code><a href="../base-4.10.1.0/Control-Monad.html#v:join">join</a></code> on the result of both a get and a set.</p></div></div><div class="top"><p class="src"><a id="v:uncertain" class="def">uncertain</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> s (m a) -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> (m s) (m a) <a href="src/Blockchain.Fae.Internal.Storage.html#uncertain" class="link">Source</a> <a href="#v:uncertain" class="selflink">#</a></p><div class="doc"><p>Upgrades a lens that starts from a definite value to one that starts
 from an &quot;uncertain&quot; (i.e. monadic) one.  Useful for chaining with <code><a href="../lens-4.16.1/Control-Lens-At.html#v:at">at</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:onlyJust" class="def">onlyJust</a> :: <a href="Blockchain-Fae.html#t:Exception">Exception</a> e =&gt; e -&gt; <a href="../lens-4.16.1/Control-Lens-Type.html#t:Lens-39-">Lens'</a> a (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) <a href="src/Blockchain.Fae.Internal.Storage.html#onlyJust" class="link">Source</a> <a href="#v:onlyJust" class="selflink">#</a></p><div class="doc"><p>A fake lens that is kind of the reverse of <code><a href="Common-Lens.html#v:defaultLens">defaultLens</a></code>; this
 purifies the result of a set at the expense of an exception.</p></div></div><h2 id="g:6">Manipulating stored values</h2><div class="top"><p class="src"><a id="v:listToOutputs" class="def">listToOutputs</a> :: [<a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>] -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:Outputs">Outputs</a> <a href="src/Blockchain.Fae.Internal.Storage.html#listToOutputs" class="link">Source</a> <a href="#v:listToOutputs" class="selflink">#</a></p><div class="doc"><p>Legacy synonym, though useful for hiding the implementation.</p></div></div><div class="top"><p class="src"><a id="v:successful" class="def">successful</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Blockchain.Fae.Internal.Storage.html#successful" class="link">Source</a> <a href="#v:successful" class="selflink">#</a></p><div class="doc"><p>Semantic interpretation of the status, hiding the pattern-match that
 establishes the policy.</p></div></div><div class="top"><p class="src"><a id="v:makeInputVersions" class="def">makeInputVersions</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> -&gt; <a href="Blockchain-Fae-Internal-Versions.html#t:VersionMap">VersionMap</a> <a href="src/Blockchain.Fae.Internal.Storage.html#makeInputVersions" class="link">Source</a> <a href="#v:makeInputVersions" class="selflink">#</a></p><div class="doc"><p>This function, formerly in <code><a href="Blockchain-Fae-Internal-Contract.html#v:acceptGlobal">acceptGlobal</a></code> from
 <a href="Blockchain-Fae-Internal-Contract.html">Blockchain.Fae.Internal.Contract</a>, constructs the version map from the
 basic results, following the policy that the result is null if the
 contract ID didn't specify an exact nonce value. </p></div></div><div class="top"><p class="src"><a id="v:addImportedValue" class="def">addImportedValue</a> :: (<a href="Blockchain-Fae-Internal-Versions.html#t:Versionable">Versionable</a> a, <a href="Blockchain-Fae-Internal-IDs.html#t:HasEscrowIDs">HasEscrowIDs</a> a, <a href="Blockchain-Fae-Internal-Contract.html#t:Exportable">Exportable</a> a) =&gt; <a href="../mtl-2.2.2/Control-Monad-State-Lazy.html#t:State">State</a> <a href="Blockchain-Fae-Internal-Contract.html#t:Escrows">Escrows</a> a -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:Status">Status</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorage">FaeStorage</a> () <a href="src/Blockchain.Fae.Internal.Storage.html#addImportedValue" class="link">Source</a> <a href="#v:addImportedValue" class="selflink">#</a></p><div class="doc"><p>Deserializes an exported value as the correct type and puts it in
 imported value storage for the future.  This is in <code><a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorage">FaeStorage</a></code> and not
 <code><a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorageT">FaeStorageT</a></code> because the former is not an instance of the latter, and
 the interpreter benefits from having a monomorphic type.</p></div></div><div class="top"><p class="src"><a id="v:getExportedValue" class="def">getExportedValue</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorageT">FaeStorageT</a> m <a href="Blockchain-Fae-Internal-Storage.html#t:ExportData">ExportData</a> <a href="src/Blockchain.Fae.Internal.Storage.html#getExportedValue" class="link">Source</a> <a href="#v:getExportedValue" class="selflink">#</a></p><div class="doc"><p>Converts the stored <code><a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></code>, which could actually have been the
 result of a previous import, into the serialized return value plus other
 metadata necessary for import elsewhere.</p></div></div><div class="top"><p class="src"><a id="v:runStorageT" class="def">runStorageT</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorageT">FaeStorageT</a> m a -&gt; m a <a href="src/Blockchain.Fae.Internal.Storage.html#runStorageT" class="link">Source</a> <a href="#v:runStorageT" class="selflink">#</a></p><div class="doc"><p>Hides the particular structure of <code><a href="Blockchain-Fae-Internal-Storage.html#t:Storage">Storage</a></code> from other modules.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>