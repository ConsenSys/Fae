<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Blockchain.Fae.Internal.Transaction</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Blockchain.Fae.Internal.Transaction.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">fae-2.0.0.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Ryan Reich 2017-2018</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>ryan.reich@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Blockchain.Fae.Internal.Transaction</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Types</a></li><li><a href="#g:2">Typeclasses</a></li><li><a href="#g:3">Functions</a><ul><li><a href="#g:4">Running transactions</a></li><li><a href="#g:5">Running contracts</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides the code that navigates the intricacies of executing a transaction.  It is useful for front-end implementations, but not to users.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Input">Input</a><ul class="subs"><li>= <a href="#v:InputArgs">InputArgs</a> { <ul class="subs"><li><a href="#v:inputCID">inputCID</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></li><li><a href="#v:inputArg">inputArg</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></li><li><a href="#v:inputRenames">inputRenames</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Renames">Renames</a></li><li><a href="#v:inputInputs">inputInputs</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:InputMaterials">InputMaterials</a></li></ul> }</li><li>| <a href="#v:InputReward">InputReward</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:BadType">BadType</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:InputMaterials">InputMaterials</a> = [(<a href="../base-4.10.1.0/Data-String.html#t:String">String</a>, <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a>)]</li><li class="src short"><span class="keyword">type</span> <a href="#t:TXStorageM">TXStorageM</a> = <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorageT">FaeStorageT</a> <a href="Blockchain-Fae-Internal-Contract.html#t:TXBodyM">TXBodyM</a></li><li class="src short"><span class="keyword">type family</span> <a href="#t:GlobalType">GlobalType</a> a = t | t -&gt; a <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">class</span> <a href="#t:Globalizable">Globalizable</a> f <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><span class="keyword">type family</span> <a href="#t:FallbackType">FallbackType</a> a <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">class</span> (<a href="Blockchain-Fae-Internal-Transaction.html#t:Globalizable">Globalizable</a> f, <a href="Blockchain-Fae-Internal-Transaction.html#t:Globalizable">Globalizable</a> (<a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> f)) =&gt; <a href="#t:TransactionBody">TransactionBody</a> f <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><a href="#v:runTransaction">runTransaction</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:TransactionBody">TransactionBody</a> f =&gt; f -&gt; [<a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> f] -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:InputMaterials">InputMaterials</a> -&gt; [<a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a>] -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Signers">Signers</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorage">FaeStorage</a> ()</li><li class="src short"><a href="#v:runMaterials">runMaterials</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:InputMaterials">InputMaterials</a> -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TXStorageM">TXStorageM</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:MaterialsMap">MaterialsMap</a>, <a href="Blockchain-Fae-Internal-Storage.html#t:Materials">Materials</a>)</li><li class="src short"><a href="#v:runInputArgs">runInputArgs</a> :: <span class="keyword">forall</span> a. <a href="Blockchain-Fae-Internal-Exceptions.html#t:Typeable">Typeable</a> a =&gt; (<a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a> -&gt; <a href="../base-4.10.1.0/Data-Typeable.html#t:TypeRep">TypeRep</a>) -&gt; (<a href="Blockchain-Fae-Internal-Contract.html#t:ReturnValue">ReturnValue</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TXStorageM">TXStorageM</a> (a, <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>)</li><li class="src short"><a href="#v:contractCallResult">contractCallResult</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a> -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="Blockchain-Fae-Internal-Contract.html#t:TXBodyM">TXBodyM</a> (<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>, <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a>)</li><li class="src short"><a href="#v:importedCallResult">importedCallResult</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="Blockchain-Fae-Internal-Contract.html#t:TXBodyM">TXBodyM</a> (<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>, <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a>)</li><li class="src short"><a href="#v:errInputResult">errInputResult</a> :: <a href="Blockchain-Fae.html#t:Exception">Exception</a> e =&gt; (<a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; e) -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; (<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>, <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a>)</li><li class="src short"><a href="#v:runContract">runContract</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:VersionID">VersionID</a> -&gt; <a href="Blockchain-Fae-Internal-Contract.html#t:AbstractGlobalContract">AbstractGlobalContract</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Blockchain-Fae-Internal-Contract.html#t:TXBodyM">TXBodyM</a> (<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>, <a href="Blockchain-Fae-Internal-Contract.html#t:AbstractGlobalContract">AbstractGlobalContract</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:AbstractGlobalContract">AbstractGlobalContract</a>)</li></ul></div><div id="interface"><h1 id="g:1">Types</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Input" class="def">Input</a> <a href="src/Blockchain.Fae.Internal.Transaction.html#Input" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></p><div class="doc"><p>How inputs are provided to transactions.  The contract with a given ID
 gets an argument and a (possibly empty) remapping of signer names.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:InputArgs" class="def">InputArgs</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:inputCID" class="def">inputCID</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:inputArg" class="def">inputArg</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:inputRenames" class="def">inputRenames</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Renames">Renames</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:inputInputs" class="def">inputInputs</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:InputMaterials">InputMaterials</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:InputReward" class="def">InputReward</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Input" class="caption collapser" onclick="toggleSection('i:Input')">Instances</p><div id="section.i:Input" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Input:Generic:1" class="instance expander" onclick="toggleSection('i:id:Input:Generic:1')"></span> <a href="Blockchain-Fae.html#t:Generic">Generic</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a></span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-57" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Input:Generic:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> -&gt; <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> x -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> <a href="#v:to" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Input:Serialize:2" class="instance expander" onclick="toggleSection('i:id:Input:Serialize:2')"></span> <a href="Blockchain-Fae-Internal-Crypto.html#t:Serialize">Serialize</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a></span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-123" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc"><ul><li></li></ul></td></tr><tr><td colspan="2"><div id="section.i:id:Input:Serialize:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put">put</a> :: <a href="../cereal-0.5.5.0/Data-Serialize-Put.html#t:Putter">Putter</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="../cereal-0.5.5.0/Data-Serialize-Get.html#t:Get">Get</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> <a href="#v:get" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Input:NFData:3" class="instance expander" onclick="toggleSection('i:id:Input:NFData:3')"></span> <a href="../cryptonite-0.25/Crypto-Internal-DeepSeq.html#t:NFData">NFData</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a></span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-125" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc"><ul><li></li></ul></td></tr><tr><td colspan="2"><div id="section.i:id:Input:NFData:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rnf">rnf</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> -&gt; () <a href="#v:rnf" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Input:Rep:4" class="instance expander" onclick="toggleSection('i:id:Input:Rep:4')"></span> <span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a></span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-1" class="link">Source</a> <a href="#t:Input" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Input:Rep:4" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../base-4.10.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> = <a href="../base-4.10.1.0/GHC-Generics.html#t:D1">D1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaData">MetaData</a> &quot;Input&quot; &quot;Blockchain.Fae.Internal.Transaction&quot; &quot;fae-2.0.0.0-L07ThzIQy745sKb2gq45cw&quot; <a href="../base-4.10.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-43-:">(:+:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:C1">C1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;InputArgs&quot; <a href="../base-4.10.1.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.10.1.0/Data-Bool.html#v:True">True</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;inputCID&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a>)) (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;inputArg&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a>))) (<a href="../base-4.10.1.0/GHC-Generics.html#t::-42-:">(:*:)</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;inputRenames&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Renames">Renames</a>)) (<a href="../base-4.10.1.0/GHC-Generics.html#t:S1">S1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a> <a href="../base-4.10.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a> &quot;inputInputs&quot;) <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:NoSourceStrictness">NoSourceStrictness</a> <a href="../base-4.10.1.0/GHC-Generics.html#v:DecidedLazy">DecidedLazy</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="Blockchain-Fae-Internal-Transaction.html#t:InputMaterials">InputMaterials</a>))))) (<a href="../base-4.10.1.0/GHC-Generics.html#t:C1">C1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> (<a href="../base-4.10.1.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;InputReward&quot; <a href="../base-4.10.1.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.10.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.10.1.0/GHC-Generics.html#t:U1">U1</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a>)))</div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BadType" class="def">BadType</a> <a href="src/Blockchain.Fae.Internal.Transaction.html#BadType" class="link">Source</a> <a href="#t:BadType" class="selflink">#</a></p><div class="doc"><p>Only to cause the transaction signature check to fail.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:InputMaterials" class="def">InputMaterials</a> = [(<a href="../base-4.10.1.0/Data-String.html#t:String">String</a>, <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a>)] <a href="src/Blockchain.Fae.Internal.Transaction.html#InputMaterials" class="link">Source</a> <a href="#t:InputMaterials" class="selflink">#</a></p><div class="doc"><p>Supplementary contract calls provided separately and not passed
 directly as arguments but rather implicitly as part of the transaction
 state.  This shows up as a <code><a href="../containers-0.5.10.2/Data-Map-Internal.html#t:Map">Map</a></code> but is provided as a list because we
 want to ensure execution ordering in case the same contract is called
 twice (the only way calls' state changes can interact).</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:TXStorageM" class="def">TXStorageM</a> = <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorageT">FaeStorageT</a> <a href="Blockchain-Fae-Internal-Contract.html#t:TXBodyM">TXBodyM</a> <a href="src/Blockchain.Fae.Internal.Transaction.html#TXStorageM" class="link">Source</a> <a href="#t:TXStorageM" class="selflink">#</a></p><div class="doc"><p>Transaction monad with storage access, for executing contracts and
 saving the results.  Note that outputs and escrows have been hidden;
 this is so contracts and the transaction body, and the fallbacks, have
 completely independent output lists.</p></div></div><h1 id="g:2">Typeclasses</h1><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:GlobalType" class="def">GlobalType</a> a = t | t -&gt; a <span class="keyword">where ...</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#GlobalType" class="link">Source</a> <a href="#t:GlobalType" class="selflink">#</a></p><div class="doc"><p>Replaces the ultimate return type with a partially-run monad, so as to
 stabilize the outputs.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (a -&gt; f) = a -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> f</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a) = <a href="Blockchain-Fae-Internal-Contract.html#t:EscrowsT">EscrowsT</a> <a href="Blockchain-Fae-Internal-Contract.html#t:TXDataM">TXDataM</a> (a, [<a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>])</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:Globalizable" class="def">Globalizable</a> f <span class="keyword">where</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#Globalizable" class="link">Source</a> <a href="#t:Globalizable" class="selflink">#</a></p><div class="doc"><p>Helper class to define an overloaded function that reduces the monad
 that a transaction body returns into.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Blockchain-Fae-Internal-Transaction.html#v:globalize">globalize</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:globalize" class="def">globalize</a> :: f -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> f <a href="src/Blockchain.Fae.Internal.Transaction.html#globalize" class="link">Source</a> <a href="#v:globalize" class="selflink">#</a></p></div><div class="subs instances"><p id="control.i:Globalizable" class="caption collapser" onclick="toggleSection('i:Globalizable')">Instances</p><div id="section.i:Globalizable" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Globalizable:Globalizable:1" class="instance expander" onclick="toggleSection('i:ic:Globalizable:Globalizable:1')"></span> <a href="Blockchain-Fae-Internal-Transaction.html#t:Globalizable">Globalizable</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a)</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-160" class="link">Source</a> <a href="#t:Globalizable" class="selflink">#</a></td><td class="doc"><ul><li></li></ul></td></tr><tr><td colspan="2"><div id="section.i:ic:Globalizable:Globalizable:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:globalize">globalize</a> :: <a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a) <a href="src/Blockchain.Fae.Internal.Transaction.html#globalize" class="link">Source</a> <a href="#v:globalize" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Globalizable:Globalizable:2" class="instance expander" onclick="toggleSection('i:ic:Globalizable:Globalizable:2')"></span> <a href="Blockchain-Fae-Internal-Transaction.html#t:Globalizable">Globalizable</a> f =&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:Globalizable">Globalizable</a> (a -&gt; f)</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-179" class="link">Source</a> <a href="#t:Globalizable" class="selflink">#</a></td><td class="doc"><ul><li></li></ul></td></tr><tr><td colspan="2"><div id="section.i:ic:Globalizable:Globalizable:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:globalize">globalize</a> :: (a -&gt; f) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (a -&gt; f) <a href="src/Blockchain.Fae.Internal.Transaction.html#globalize" class="link">Source</a> <a href="#v:globalize" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Globalizable:Globalizable:3" class="instance expander" onclick="toggleSection('i:ic:Globalizable:Globalizable:3')"></span> <a href="Blockchain-Fae-Internal-Transaction.html#t:Globalizable">Globalizable</a> f =&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:Globalizable">Globalizable</a> (<a href="Blockchain-Fae-Internal-Reward.html#t:Reward">Reward</a> -&gt; f)</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-205" class="link">Source</a> <a href="#t:Globalizable" class="selflink">#</a></td><td class="doc"><ul><li></li></ul></td></tr><tr><td colspan="2"><div id="section.i:ic:Globalizable:Globalizable:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:globalize">globalize</a> :: (<a href="Blockchain-Fae-Internal-Reward.html#t:Reward">Reward</a> -&gt; f) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Reward.html#t:Reward">Reward</a> -&gt; f) <a href="src/Blockchain.Fae.Internal.Transaction.html#globalize" class="link">Source</a> <a href="#v:globalize" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:FallbackType" class="def">FallbackType</a> a <span class="keyword">where ...</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#FallbackType" class="link">Source</a> <a href="#t:FallbackType" class="selflink">#</a></p><div class="doc"><p>Applies to any function of any arity, ending in a <code><a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a></code>, which it
 voids.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> (a -&gt; f) = a -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> f</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a) = <a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">class</span> (<a href="Blockchain-Fae-Internal-Transaction.html#t:Globalizable">Globalizable</a> f, <a href="Blockchain-Fae-Internal-Transaction.html#t:Globalizable">Globalizable</a> (<a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> f)) =&gt; <a id="t:TransactionBody" class="def">TransactionBody</a> f <span class="keyword">where</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#TransactionBody" class="link">Source</a> <a href="#t:TransactionBody" class="selflink">#</a></p><div class="doc"><p>This class, and its only instances, define what a transaction function
 must look like: essentially, any function of the form</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>body :: a -&gt; b -&gt; ... -&gt; FaeTX result
</code></strong></pre><p>where the argument types correspond, in order, to the return types of
 the transaction's input contracts.  Correspondingly, any fallback
 functions must have the signature</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fallback :: a -&gt; b -&gt; ... -&gt; FaeTX ()
</code></strong></pre><p>though other return value types are accepted, and ignored.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Blockchain-Fae-Internal-Transaction.html#v:callTransactionBody">callTransactionBody</a>, <a href="Blockchain-Fae-Internal-Transaction.html#v:applyFallback">applyFallback</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:callTransactionBody" class="def">callTransactionBody</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> f -&gt; [<a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a>] -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TXStorageM">TXStorageM</a> ([<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>], <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a>, [<a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>]) <a href="src/Blockchain.Fae.Internal.Transaction.html#callTransactionBody" class="link">Source</a> <a href="#v:callTransactionBody" class="selflink">#</a></p><div class="doc"><p>The workhorse of this module; steps through the arguments,
 accumulating the input results and the final return value.</p><p>The <code><a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a></code>, in our instances, is added in this function, and is
 guaranteed to be defined even if the return value is exceptional,
 unless the transaction itself is exceptional, when it throws that
 exception.</p></div><p class="src"><a id="v:applyFallback" class="def">applyFallback</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> f -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> f) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> f <a href="src/Blockchain.Fae.Internal.Transaction.html#applyFallback" class="link">Source</a> <a href="#v:applyFallback" class="selflink">#</a></p><div class="doc"><p>&quot;Installs a handler&quot; on the given transaction body.</p></div></div><div class="subs instances"><p id="control.i:TransactionBody" class="caption collapser" onclick="toggleSection('i:TransactionBody')">Instances</p><div id="section.i:TransactionBody" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:TransactionBody:TransactionBody:1" class="instance expander" onclick="toggleSection('i:ic:TransactionBody:TransactionBody:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> a =&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TransactionBody">TransactionBody</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a)</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-128" class="link">Source</a> <a href="#t:TransactionBody" class="selflink">#</a></td><td class="doc"><p>The base-case instance: a transaction with no arguments.</p></td></tr><tr><td colspan="2"><div id="section.i:ic:TransactionBody:TransactionBody:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:callTransactionBody">callTransactionBody</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a) -&gt; [<a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a>] -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TXStorageM">TXStorageM</a> ([<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>], <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a>, [<a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>]) <a href="src/Blockchain.Fae.Internal.Transaction.html#callTransactionBody" class="link">Source</a> <a href="#v:callTransactionBody" class="selflink">#</a></p><p class="src"><a href="#v:applyFallback">applyFallback</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a)) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:FaeTX">FaeTX</a> a) <a href="src/Blockchain.Fae.Internal.Transaction.html#applyFallback" class="link">Source</a> <a href="#v:applyFallback" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:TransactionBody:TransactionBody:2" class="instance expander" onclick="toggleSection('i:ic:TransactionBody:TransactionBody:2')"></span> (<a href="Blockchain-Fae-Internal-Transaction.html#t:TransactionBody">TransactionBody</a> f, <a href="Blockchain-Fae-Internal-Exceptions.html#t:Typeable">Typeable</a> <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> a) =&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TransactionBody">TransactionBody</a> (a -&gt; f)</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-165" class="link">Source</a> <a href="#t:TransactionBody" class="selflink">#</a></td><td class="doc"><p>The inductive-case instance: a transaction with one more argument.</p></td></tr><tr><td colspan="2"><div id="section.i:ic:TransactionBody:TransactionBody:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:callTransactionBody">callTransactionBody</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (a -&gt; f) -&gt; [<a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a>] -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TXStorageM">TXStorageM</a> ([<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>], <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a>, [<a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>]) <a href="src/Blockchain.Fae.Internal.Transaction.html#callTransactionBody" class="link">Source</a> <a href="#v:callTransactionBody" class="selflink">#</a></p><p class="src"><a href="#v:applyFallback">applyFallback</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (a -&gt; f) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> (a -&gt; f)) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (a -&gt; f) <a href="src/Blockchain.Fae.Internal.Transaction.html#applyFallback" class="link">Source</a> <a href="#v:applyFallback" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:TransactionBody:TransactionBody:3" class="instance expander" onclick="toggleSection('i:ic:TransactionBody:TransactionBody:3')"></span> <a href="Blockchain-Fae-Internal-Transaction.html#t:TransactionBody">TransactionBody</a> f =&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TransactionBody">TransactionBody</a> (<a href="Blockchain-Fae-Internal-Reward.html#t:Reward">Reward</a> -&gt; f)</span> <a href="src/Blockchain.Fae.Internal.Transaction.html#line-184" class="link">Source</a> <a href="#t:TransactionBody" class="selflink">#</a></td><td class="doc"><p>The special-case instance: a reward.</p></td></tr><tr><td colspan="2"><div id="section.i:ic:TransactionBody:TransactionBody:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:callTransactionBody">callTransactionBody</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Reward.html#t:Reward">Reward</a> -&gt; f) -&gt; [<a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a>] -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TXStorageM">TXStorageM</a> ([<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>], <a href="Blockchain-Fae-Internal-Storage.html#t:Result">Result</a>, [<a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a>]) <a href="src/Blockchain.Fae.Internal.Transaction.html#callTransactionBody" class="link">Source</a> <a href="#v:callTransactionBody" class="selflink">#</a></p><p class="src"><a href="#v:applyFallback">applyFallback</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Reward.html#t:Reward">Reward</a> -&gt; f) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> (<a href="Blockchain-Fae-Internal-Reward.html#t:Reward">Reward</a> -&gt; f)) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:GlobalType">GlobalType</a> (<a href="Blockchain-Fae-Internal-Reward.html#t:Reward">Reward</a> -&gt; f) <a href="src/Blockchain.Fae.Internal.Transaction.html#applyFallback" class="link">Source</a> <a href="#v:applyFallback" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:3">Functions</h1><h2 id="g:4">Running transactions</h2><div class="top"><p class="src"><a id="v:runTransaction" class="def">runTransaction</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:TransactionBody">TransactionBody</a> f =&gt; f -&gt; [<a href="Blockchain-Fae-Internal-Transaction.html#t:FallbackType">FallbackType</a> f] -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:InputMaterials">InputMaterials</a> -&gt; [<a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a>] -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:TransactionID">TransactionID</a> -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:Signers">Signers</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Blockchain-Fae-Internal-Storage.html#t:FaeStorage">FaeStorage</a> () <a href="src/Blockchain.Fae.Internal.Transaction.html#runTransaction" class="link">Source</a> <a href="#v:runTransaction" class="selflink">#</a></p><div class="doc"><p>Runs a transaction on its inputs, with some basic information about
 the context.</p></div></div><div class="top"><p class="src"><a id="v:runMaterials" class="def">runMaterials</a> :: <a href="Blockchain-Fae-Internal-Transaction.html#t:InputMaterials">InputMaterials</a> -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TXStorageM">TXStorageM</a> (<a href="Blockchain-Fae-Internal-Contract.html#t:MaterialsMap">MaterialsMap</a>, <a href="Blockchain-Fae-Internal-Storage.html#t:Materials">Materials</a>) <a href="src/Blockchain.Fae.Internal.Transaction.html#runMaterials" class="link">Source</a> <a href="#v:runMaterials" class="selflink">#</a></p><div class="doc"><p>Runs the materials as inputs, providing both kinds of result and <em>not</em>
 type-checking the return values (that is done at the point of use).</p></div></div><div class="top"><p class="src"><a id="v:runInputArgs" class="def">runInputArgs</a> :: <span class="keyword">forall</span> a. <a href="Blockchain-Fae-Internal-Exceptions.html#t:Typeable">Typeable</a> a =&gt; (<a href="Blockchain-Fae-Internal-Contract.html#t:Output">Output</a> -&gt; <a href="../base-4.10.1.0/Data-Typeable.html#t:TypeRep">TypeRep</a>) -&gt; (<a href="Blockchain-Fae-Internal-Contract.html#t:ReturnValue">ReturnValue</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:Input">Input</a> -&gt; <a href="Blockchain-Fae-Internal-Transaction.html#t:TXStorageM">TXStorageM</a> (a, <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>) <a href="src/Blockchain.Fae.Internal.Transaction.html#runInputArgs" class="link">Source</a> <a href="#v:runInputArgs" class="selflink">#</a></p><div class="doc"><p>This is apparently polymorphic, but in fact will fail if the return
 type does not agree with the (dynamic) input type.  It is also actually
 (not apparently) partial, as it does not handle <code><a href="Blockchain-Fae-Internal-Transaction.html#v:InputReward">InputReward</a></code>, whose
 result is not dynamically typed.  Other than the (completely avoidable)
 exception thrown by calling the missing case, this function never
 throws.</p><p>Renames are applied here so that they propagate to the materials calls.
 This ensures locality in the renaming logic as it is applied
 recursively.</p></div></div><h2 id="g:5">Running contracts</h2><div class="top"><p class="src"><a id="v:contractCallResult" class="def">contractCallResult</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a> -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="Blockchain-Fae-Internal-Contract.html#t:TXBodyM">TXBodyM</a> (<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>, <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a>) <a href="src/Blockchain.Fae.Internal.Transaction.html#contractCallResult" class="link">Source</a> <a href="#v:contractCallResult" class="selflink">#</a></p><div class="doc"><p>Uses the stored contract that was found, returning a full
 <code><a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></code> (including possible exceptional return values) and the
 possible updated contract.</p><p>The local hash is modified by hashing in the argument here, rather than
 in <code><a href="Blockchain-Fae-Internal-Transaction.html#v:runInputArgs">runInputArgs</a></code>, because each of the materials calls gets its own
 local hash from its own argument.</p></div></div><div class="top"><p class="src"><a id="v:importedCallResult" class="def">importedCallResult</a> :: <a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a> -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="Blockchain-Fae-Internal-Contract.html#t:TXBodyM">TXBodyM</a> (<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>, <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a>) <a href="src/Blockchain.Fae.Internal.Transaction.html#importedCallResult" class="link">Source</a> <a href="#v:importedCallResult" class="selflink">#</a></p><div class="doc"><p>If there's no stored contract but there is an imported result for this
 call, we use that, simulating its execution by depositing its escrows
 into context.  This will never fail, and will also never update the
 contract (which is not present).</p></div></div><div class="top"><p class="src"><a id="v:errInputResult" class="def">errInputResult</a> :: <a href="Blockchain-Fae.html#t:Exception">Exception</a> e =&gt; (<a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; e) -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; (<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>, <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:StoredContract">StoredContract</a>) <a href="src/Blockchain.Fae.Internal.Transaction.html#errInputResult" class="link">Source</a> <a href="#v:errInputResult" class="selflink">#</a></p><div class="doc"><p>Constructs a conforming exceptional input result, containing all the
 necessary fields for the summary with exceptions in the ones that can't
 be known.</p></div></div><div class="top"><p class="src"><a id="v:runContract" class="def">runContract</a> :: <a href="Blockchain-Fae-Internal-IDs-Types.html#t:ContractID">ContractID</a> -&gt; <a href="Blockchain-Fae-Internal-IDs-Types.html#t:VersionID">VersionID</a> -&gt; <a href="Blockchain-Fae-Internal-Contract.html#t:AbstractGlobalContract">AbstractGlobalContract</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Blockchain-Fae-Internal-Contract.html#t:TXBodyM">TXBodyM</a> (<a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a>, <a href="Blockchain-Fae-Internal-Contract.html#t:AbstractGlobalContract">AbstractGlobalContract</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Blockchain-Fae-Internal-Contract.html#t:AbstractGlobalContract">AbstractGlobalContract</a>) <a href="src/Blockchain.Fae.Internal.Transaction.html#runContract" class="link">Source</a> <a href="#v:runContract" class="selflink">#</a></p><div class="doc"><p>Executes the contract function, returning the result and the
 continuation function.  This is where the <code><a href="Blockchain-Fae-Internal-Storage.html#v:iStatus">iStatus</a></code> field of the
 <code><a href="Blockchain-Fae-Internal-Storage.html#t:InputResults">InputResults</a></code> value is set, because this is the last place where the
 <code><a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a></code> on the continuation is readily available.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>